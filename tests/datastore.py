import os

import pooch

registry = {
    # Aperio file with JP2K compression.
    # Source: TCGA-CV-7242-11A-01-TS1.1838afb1-9eee-4a70-9ae3-50e3ab45e242.svs
    'aperio_jp2k.svs': 'sha512:9a4312bc720e81ef4496cc33c71c122b82226f72bc4944b0192cc83a93b9ed7f69612d3f4369279c2ec41183e3f684cca7e068208b7d0a42bdca26cbdc3b9aac',  # noqa
    # Hamamatsu file
    # Source: OS-2.ndpi
    'hamamatsu.ndpi': 'sha512:f788288ed1f8ab55a05d33f218fd4bafbc59e3ecc2ade40b5127b53caaaaaf3c8c9ba42d022082c27b673e1ee6dd433eb21a1d57edf4e6694dcd7eea89778941',  # noqa
    # Philips file
    # Source: sample_image.ptif
    'philips.ptif': 'sha512:ec0ec688537080e4ec2abb3978c14577df87250a2c0af42beaadc8f00f0baba210997d5d2fe7cfeeceb841885b6adad0c9f607e35eddcc479eb487bd3c1e28ac',  # noqa
    # Sample mouse tissue files to use with default schema tests
    'SEER_Mouse_1_17158539.svs': 'sha512:1ace33abb4bf96382c8823706c43deb1115b08d46bf96e2b03f425697a85e767631f0dc5568cce68c9110f1df66d264a97671fd488466f3cf59295513d6c7792',  # noqa
    'SEER_Mouse_1_17158540.svs': 'sha512:74a0d97e9f8e3f42409c10be37eca9fb5d3be06f0a4f258d4b58efb5adc67f3f787a868bce6aa75649d25b221f4a0b32109bcc1ca1c696d4060981cb7d6b65f1',  # noqa
    'SEER_Mouse_1_17158541.svs': 'sha512:f5fcbc5f31201ff7a28886d2b386a34fe9c0eb84cf9ce4e30601e6abe43c120ed242e23b1af555e69abab7823aef59a7220e6159b12f2cf565a2de69eb2cf1cb',  # noqa
    'SEER_Mouse_1_17158542.svs': 'sha512:e763630a72b307932c64e442253fbf3c1877e7c9db77abb93864d37418fe7f94b9ace5286dff44ff0242ca1acfc58e3282b71959a864abdd925dc409452e40b7',  # noqa
    'SEER_Mouse_1_17158543.svs': 'sha512:60ef06d11da310b713327adcab122e128a8a9506a68047dcff3ac5a327766e168f97ec032ba92b997b0d83e455864f8f61998c8c5f24767471b8b3c951838de1',  # noqa
    # Sample ome tiff, converted from an svs file
    'SEER_Mouse_13_17158640.ome.tiff': 'sha512:b8f76365082edc01801a3bb3ac8c97a93e29a195728b2068d3a592ecadedc5382ba6b207cbeaa7e9c5eac6042e68ba623e105002765127a14a816c6f3ca6305d',  # noqa
    # Sample DICOM, converted from an svs file
    '1.2.826.0.1.3680043.8.498.36184456345241605706442413869150689455.dcm': 'sha512:daecd914eef19432af80242a58bce8c42718a3715a1b20ebbed2cfaf09cc80bdcd4dedde9b5eb71d95f55df5aa9e5b54e5a3c9185c6d841f5ad488ae348d5faa',  # noqa
    '1.2.826.0.1.3680043.8.498.42073701762459524382607362097568471390.dcm': 'sha512:7920d303d71b3de51b218f09e7470db711f0e1658affe5cb4744f15437b9912033f0df5b32bbb2e82af0338ec259c3eaf996b6f1623514effc12be66972d2610',  # noqa
    '1.2.826.0.1.3680043.8.498.45024273607261000912390535815605192386.dcm': 'sha512:54bc69a55ccb1a679ae8a96f22b5eaf3135c838c7dd48fe70b28f7686961856059568939f28b0c0d613e018425aff197bc78d06e36d7d363ef537d9aff43588f',  # noqa
    '1.2.826.0.1.3680043.8.498.47505028268204829845108348075290934186.dcm': 'sha512:1afe86f5f0db544a98d024cbe06b8a13504ad4a8f4858307a0edc83a6c27a3ea4c68d7638bd80f8790dcfd0ad96e847f85fbb6a7237ad98141b9cd1d252f2348',  # noqa
    '1.2.826.0.1.3680043.8.498.54808363536851466481756381810946284392.dcm': 'sha512:00709107330c787f5eaf47b911ddb12eaa572754bae512928d6705bf9ffe2f8da1ab66212f0e09464f8f1a79d64c8f55a14cc42b1c6c1407ad9dd405621ba4dc',  # noqa
    '1.2.826.0.1.3680043.8.498.8524460359730485979974947746994429665.dcm': 'sha512:cc87ded6dc75034a72aa571a190aced772a8dde92cf33ad3a9b915af30f4f6f65c0d6a3a2a53ff10414f17b233039377e9def20a4fea932d18c3808487616bbb',  # noqa
    '1.2.826.0.1.3680043.8.498.86443773870937226972297424998772618057.dcm': 'sha512:a437eb2685fc715249d2902d624feb326ad1372d90a4678cdf509aa099e8d32954fa9e7dbcde37993ee466c805f7157a6e253d3fa5c559959a8d980e4b2d0c40',  # noqa
    '1.2.826.0.1.3680043.8.498.89208146344050583285044845190394272931.dcm': 'sha512:1494e989da9449ac438dd4cade2b4b66df189aceabf4794be810bcc59cde4a50fca43c3cdffa5374030285cfae6632bb0164476c9c05a13c03d5cba10b93d2e7',  # noqa
    '1.2.826.0.1.3680043.8.498.89852650847790000619309221142686527554.dcm': 'sha512:f9ab3ac8de99f619d4d55f5b98db6a971730e3f730ef0cda1fecb51e9f32bb82335d0a13af388c1d389b78266b70f7f65144d5608d08f4700328b6bf4d00767e',  # noqa
    '1.2.826.0.1.3680043.8.498.95862808301151738678261622226284754648.dcm': 'sha512:1cd8aa53c02f557513b729d5cce21042e5f6b5d451e87ea68978a0b5ab70de4a72674518c25a6de399150eaf160488cb7b24c91a6f749b8c64e1fd448a748859',  # noqa
}


class DKCPooch(pooch.Pooch):
    def get_url(self, fname):
        self._assert_file_in_registry(fname)
        algo, hashvalue = self.registry[fname].split(':')
        return self.base_url.format(algo=algo, hashvalue=hashvalue)


datastore = DKCPooch(
    path=pooch.utils.cache_location(
        os.path.join(os.environ.get(
            'TOX_WORK_DIR', pooch.utils.os_cache('pooch')), 'dkc_datastore'),
    ),
    base_url='https://data.kitware.com/api/v1/file/hashsum/{algo}/{hashvalue}/download',
    registry=registry,
)
